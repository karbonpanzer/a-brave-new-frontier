<?xml version="1.0" encoding="utf-8" ?>

<Patch>
  <Operation Class="PatchOperationFindMod">
    <mods>
      <li>Vanilla Expanded Framework</li>
    </mods>

    <match Class="PatchOperationAdd">
      <xpath>Defs</xpath>
      <value>

        <ThingDef ParentName="KP_CarapaceArmors">
          <defName>BNF_Armor_Light_Experimental</defName>
          <label>Carapace Armor (Experimental)</label>
          <description>Before the fall of the Coreworlds, the many armies of the Great Domain saw many servicemen divided into two groups, the Infantry and the Veterancy. While the Infantry was made up of various people from all walks of life, the Veterancy came from ancient nobility and were enhanced mechanically and biologically. This is the equipment of the Infantry, cheap and effective armor based on a plasteel framework with steel reinforcements to ensure an effective armor while being easy to produce compared to the Power Armor of the Veterancy. Its popularity remains after several centuries of usage.</description>
          <techLevel>Spacer</techLevel>
          <recipeMaker>
            <researchPrerequisite>LateIndustrialFlakArmor</researchPrerequisite>
            <unfinishedThingDef>UnfinishedTechArmor</unfinishedThingDef>
            <skillRequirements>
              <Crafting>5</Crafting>
            </skillRequirements>
            <recipeUsers Inherit="false">
              <li>TableMachining</li>
            </recipeUsers>
          </recipeMaker>
          <graphicData>
            <texPath>Armor/LightArmorVariants/LightArmorFixed/LightArmor</texPath>
            <graphicClass>Graphic_Single</graphicClass>
            <shaderType>CutoutComplex</shaderType>
          </graphicData>
          <statBases>
            <WorkToMake>60000</WorkToMake>
            <MaxHitPoints>250</MaxHitPoints>
            <Mass>7</Mass>
            <Flammability>0.4</Flammability>
            <ArmorRating_Sharp>0.90</ArmorRating_Sharp>
            <ArmorRating_Blunt>0.35</ArmorRating_Blunt>
            <ArmorRating_Heat>0.40</ArmorRating_Heat>
            <EquipDelay>14</EquipDelay>
          </statBases>
          <equippedStatOffsets>
            <MoveSpeed>-0.04</MoveSpeed>
          </equippedStatOffsets>
          <thingCategories>
            <li>BNF_Armor</li>
          </thingCategories>
          <costList>
            <Cloth>60</Cloth>
            <Plasteel>10</Plasteel>
            <Steel>80</Steel>
            <ComponentIndustrial>1</ComponentIndustrial>
          </costList>

          <apparel>
            <bodyPartGroups>
              <li>Torso</li>
              <li>Shoulders</li>
              <li>Neck</li>
            </bodyPartGroups>
            <wornGraphicPath>Armor/LightArmorVariants/LightArmorFixed/LightArmor</wornGraphicPath>
            <useWornGraphicMask>True</useWornGraphicMask>
            <layers>
              <li>Middle</li>
            </layers>
            <tags>
              <li>BNF_Armor_Light</li>
              <li>BNF_Armor_Light_Shocktrooper</li>
            </tags>
            <defaultOutfitTags>
              <li>Soldier</li>
            </defaultOutfitTags>

            <renderNodeProperties>
              <li Class="BNF.Core.DecalSystem.PawnRenderNodePropertiesOmniBnf">
                <nodeClass>VEF.Graphics.PawnRenderNode_Omni</nodeClass>
                <workerClass>BNF.Core.DecalSystem.PawnRenderNodeWorkerOmniBodyApparelBnf</workerClass>
                <parentTagDef>ApparelBody</parentTagDef>
                <baseLayer>500</baseLayer>

                <conditionalGraphics>
                  <useFactionRNGSeed>true</useFactionRNGSeed>
                  <texPaths>
                    <li>Symbols/None</li>
                  </texPaths>
                  <colorA>
                    <color>(0.0,0.0,0.0)</color>
                  </colorA>
                  <shader>Cutout</shader>
                  <alts>
                    <li>
                      <tagRequirements>
                        <li>DecalActive</li>
                      </tagRequirements>
                      <texPath>DecalSymbol</texPath>
                      <colorA>
                        <taggedColor>DecalSymbolColor</taggedColor>
                      </colorA>
                      <shader>Cutout</shader>
                    </li>
                  </alts>
                </conditionalGraphics>

                <visibleFacing>
                  <li>South</li>
                  <li>North</li>
                </visibleFacing>

                <BodyTypeOffsetsByFacingRows>
                  <li>
                    <bodyType>Fat</bodyType>
                    <north>(0,0,0.07)</north>
                    <south>(0,0,0.025)</south>
                  </li>
                  <li>
                    <bodyType>Thin</bodyType>
                    <north>(0,0,0.045)</north>
                  </li>
                  <li>
                    <bodyType>Hulk</bodyType>
                    <north>(0,0,0.7)</north>
                    <south>(0,0,-0.07)</south>
                  </li>
                  <li>
                    <bodyType>Female</bodyType>
                    <north>(0,0,0.07)</north>
                    <south>(0,0,0.05)</south>
                  </li>
                </BodyTypeOffsetsByFacingRows>

                <drawData>
                  <scale>0.080</scale>
                  <defaultData>
                    <layer>22.3797</layer>
                    <offset>(0,0,-0.20)</offset>
                  </defaultData>
                  <dataNorth>
                    <layer>22.380</layer>
                    <offset>(0,0,-0.17)</offset>
                  </dataNorth>
                  <bodyTypeScales>
                    <Hulk>1.35</Hulk>
                    <Fat>1.1</Fat>
                    <Thin>0.9</Thin>
                  </bodyTypeScales>                  
                </drawData>
              </li>
            </renderNodeProperties>

            <useDeflectMetalEffect>true</useDeflectMetalEffect>
            <soundWear>Wear_PowerArmor</soundWear>
            <soundRemove>Remove_PowerArmor</soundRemove>
          </apparel>

          <colorGenerator Class="ColorGenerator_Single">
            <color>(0.47, 0.47, 0.47)</color>
          </colorGenerator>

          <comps>
            <li Class="BNF.Core.DecalSystem.CompPropertiesEditDecalMarker" />
          </comps>
        </ThingDef>

        <ThingDef ParentName="ArmorHelmetMakeableBase">
          <defName>KP_Light_Flak_HelmetE</defName>
          <label>Carapace Helmet (Experimental)</label>
          <description>Based on an ancient design of headwear, this helmet was designed for usage during Attrition Warfare. From the most brutal of trenches this helmet protects from Carapace and shrapnel that often finds soldiers in the trenches. Though lacking the finer details of more modern designs it makes up for it through the ease of production of this helmet. Its composition allows a versatile usage, being made from a composite of plasteel and a base metal that ensures even soldiers on the most barren of worlds will have adequate protection from their enemies.</description>
          <techLevel>Spacer</techLevel>
          <recipeMaker>
            <researchPrerequisite>LateIndustrialFlakArmor</researchPrerequisite>
            <unfinishedThingDef>UnfinishedTechArmor</unfinishedThingDef>
            <skillRequirements>
              <Crafting>5</Crafting>
            </skillRequirements>
            <recipeUsers Inherit="false">
              <li>TableMachining</li>
            </recipeUsers>
          </recipeMaker>
          <graphicData>
            <texPath>Helmets/LightHelmet/LightHelmet</texPath>
            <graphicClass>Graphic_Single</graphicClass>
            <shaderType>CutoutComplex</shaderType>
          </graphicData>
          <statBases>
            <WorkToMake>7000</WorkToMake>
            <MaxHitPoints>110</MaxHitPoints>
            <Mass>1</Mass>
            <StuffEffectMultiplierArmor>1.10</StuffEffectMultiplierArmor>
            <EquipDelay>5</EquipDelay>
          </statBases>
          <equippedStatOffsets>
            <MoveSpeed>-0.01</MoveSpeed>
          </equippedStatOffsets>
          <costList>
            <Cloth>10</Cloth>
            <Plasteel>5</Plasteel>
            <ComponentIndustrial>1</ComponentIndustrial>
            <Steel>40</Steel>
          </costList>
          <thingCategories>
            <li>BNF_Helmets</li>
          </thingCategories>

          <apparel>
            <bodyPartGroups>
              <li>UpperHead</li>
            </bodyPartGroups>
            <wornGraphicPath>Helmets/LightHelmet/LightHelmet</wornGraphicPath>
            <useWornGraphicMask>True</useWornGraphicMask>
            <layers>
              <li>Overhead</li>
            </layers>
            <tags>
              <li>BNF_Armor_Light</li>
              <li>BNF_Armor_Scout</li>
            </tags>
            <defaultOutfitTags>
              <li>Soldier</li>
            </defaultOutfitTags>

            <renderNodeProperties>
              <li Class="BNF.Core.DecalSystem.PawnRenderNodePropertiesOmniBnf">
                <nodeClass>VEF.Graphics.PawnRenderNode_Omni</nodeClass>
                <workerClass>BNF.Core.DecalSystem.PawnRenderNodeWorkerOmniHeadApparelBnf</workerClass>
                <parentTagDef>ApparelHead</parentTagDef>
                <baseLayer>72</baseLayer>

                <conditionalGraphics>
                  <useFactionRNGSeed>true</useFactionRNGSeed>
                  <texPaths>
                    <li>Symbols/None</li>
                  </texPaths>
                  <colorA>
                    <color>(0.4,0.4,0.4)</color>
                  </colorA>
                  <shader>Cutout</shader>
                  <alts>
                    <li>
                      <tagRequirements>
                        <li>DecalActive_Head</li>
                      </tagRequirements>

                      <texPath>DecalSymbol_Head</texPath>

                      <colorA>
                        <taggedColor>DecalSymbolColor_Head</taggedColor>
                      </colorA>

                      <shader>Cutout</shader>
                    </li>
                  </alts>
                </conditionalGraphics>

                <visibleFacing>
                  <li>South</li>
                </visibleFacing>

                <drawData>
                  <scale>0.075</scale>
                  <defaultData>
                    <layer>75</layer>
                    <offset>(0,0,0.10)</offset>
                  </defaultData>
                  <dataNorth>
                    <layer>75</layer>
                    <offset>(0,0,0.10)</offset>
                  </dataNorth>
                </drawData>
              </li>
            </renderNodeProperties>
          </apparel>

          <comps>
            <li Class="BNF.Core.DecalSystem.CompPropertiesEditDecalMarker" />
          </comps>

          <colorGenerator Class="ColorGenerator_Single">
            <color>(0.47, 0.47, 0.47)</color>
          </colorGenerator>
        </ThingDef>

      </value>
    </match>
  </Operation>
</Patch>