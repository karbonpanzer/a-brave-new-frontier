<?xml version="1.0" encoding="utf-8"?>
<Defs>

  <ThingDef Name="KP_CarapaceArmors" ParentName="ArmorMachineableBase" Abstract="True">
    <techLevel>Spacer</techLevel>
    <apparel>
      <bodyPartGroups>
        <li>Torso</li>
        <li>Neck</li>
        <li>Shoulders</li>
      </bodyPartGroups>
      <layers>
        <li>Middle</li>
      </layers>
      <defaultOutfitTags>
        <li>Soldier</li>
      </defaultOutfitTags>
      <soundWear>Wear_PowerArmor</soundWear>
      <soundRemove>Remove_PowerArmor</soundRemove>
      <useDeflectMetalEffect>true</useDeflectMetalEffect>
    </apparel>
    <comps>
      <li Class="BNF.Core.DecalSystem.CompPropertiesEditDecalMarker" />
    </comps>
    	<tradeTags>
			<li>Armor</li>
			<li>BNF_Armor</li>
		</tradeTags>     
  </ThingDef>

  <!-- Base for Heavy Carapace variants -->
  <ThingDef Name="KP_Heavy_Flak_Armor_Base" ParentName="KP_CarapaceArmors" Abstract="True">
    <techLevel>Spacer</techLevel>
    <recipeMaker>
      <researchPrerequisite>HeavyFlakArmor</researchPrerequisite>
      <unfinishedThingDef>UnfinishedTechArmor</unfinishedThingDef>
      <skillRequirements>
        <Crafting>7</Crafting>
      </skillRequirements>
      <recipeUsers Inherit="False">
        <li>TableMachining</li>
      </recipeUsers>
    </recipeMaker>
    <graphicData>
      <graphicClass>Graphic_Single</graphicClass>
      <shaderType>CutoutComplex</shaderType>
      <texPath>Armor/HeavyArmorVariants/HeavyArmor/HeavyArmor</texPath>
    </graphicData>
    <statBases>
      <WorkToMake>10000</WorkToMake>
      <MarketValue>800</MarketValue>
      <MaxHitPoints>180</MaxHitPoints>
      <Mass>12.0</Mass>
      <StuffEffectMultiplierArmor>1.25</StuffEffectMultiplierArmor>
      <EquipDelay>8</EquipDelay>
    </statBases>
    <equippedStatOffsets>
      <MoveSpeed>-0.07</MoveSpeed>
    </equippedStatOffsets>
    <thingCategories>
      <li>BNF_Armor</li>
    </thingCategories>
    <costList>
      <Cloth>60</Cloth>
      <Plasteel>30</Plasteel>
      <ComponentIndustrial>3</ComponentIndustrial>
    </costList>
    <stuffCategories>
      <li>Metallic</li>
    </stuffCategories>
    <costStuffCount>100</costStuffCount>
    <apparel>
      <wornGraphicPath>Armor/HeavyArmorVariants/HeavyArmor/HeavyArmor</wornGraphicPath>
      <useWornGraphicMask>True</useWornGraphicMask>
      <tags />
    </apparel>
    	<tradeTags>
			<li>Armor</li>
			<li>BNF_Armor</li>
		</tradeTags> 
    <colorGenerator Class="ColorGenerator_StandardApparel" />
  </ThingDef>

  <ThingDef ParentName="KP_Heavy_Flak_Armor_Base">
    <defName>KP_Heavy_Flak_Armor</defName>
    <label>Heavy Carapace Armor</label>
    <description>While Carapace Armor is better than flak vests and jackets, it does seem to lack a defense against charge weaponry and heavy munitions. An easier solution would be to equip all soldiers in the infantry with semi-powered armor but that is easier said than done. The end decision of this issue eventually became reinforcing the Carapace Armor with additional plates of plasteel to enhance its defensive abilities. The Heavy Carapace Armor was introduced during the Battle of Coldharbour after the Fall of the Great Domain to mixed success.</description>
    <apparel>
      <tags Inherit="False">
        <li>BNF_Armor_Heavy</li>
        <li>BNF_Armor_Heavy_Shocktrooper</li>
      </tags>
      <renderNodeProperties>
        <li Class="BNF.Core.DecalSystem.PawnRenderNodePropertiesOmniBnf">
          <nodeClass>VEF.Graphics.PawnRenderNode_Omni</nodeClass>
          <workerClass>BNF.Core.DecalSystem.PawnRenderNodeWorkerOmniBodyApparelBnf</workerClass>
          <parentTagDef>ApparelBody</parentTagDef>
          <baseLayer>16</baseLayer>
          <conditionalGraphics>
            <useFactionRNGSeed>true</useFactionRNGSeed>
            <texPaths>
              <li>Symbols/Infantry/None</li>
              <li>Symbols/Infantry/Arrowhead</li>
              <li>Symbols/Infantry/CrossedRifles</li>
              <li>Symbols/Infantry/CrossedSabers</li>
              <li>Symbols/Infantry/CrossedSwords</li>
              <li>Symbols/Infantry/Exoduster</li>
              <li>Symbols/Infantry/Lambda</li>
              <li>Symbols/Infantry/Skull</li>
              <li>Symbols/Infantry/Sword</li>
              <li>Symbols/Infantry/6Cav</li>
              <li>Symbols/Infantry/12Inf</li>
              <li>Symbols/Infantry/20Inf</li>
              <li>Symbols/Infantry/Keystone</li>
              <li>Symbols/Infantry/Club</li>
              <li>Symbols/Infantry/Heart</li>
              <li>Symbols/Infantry/Spade</li>
              <li>Symbols/Infantry/Diamond</li>
            </texPaths>
            <colorA>
              <color>(0.0,0.0,0.0)</color>
            </colorA>
            <shader>Cutout</shader>
            <alts>
              <li>
                <tagRequirements>
                  <li>DecalActive</li>
                </tagRequirements>
                <texPath>DecalSymbol</texPath>
                <colorA>
                  <taggedColor>DecalSymbolColor</taggedColor>
                </colorA>
                <shader>Cutout</shader>
              </li>
            </alts>
          </conditionalGraphics>

          <visibleFacing>
            <li>South</li>
            <li>North</li>
          </visibleFacing>

          <BodyTypeOffsetsByFacingRows>
            <li>
              <bodyType>Fat</bodyType>
              <north>(0,0,0.07)</north>
              <south>(0,0,0.025)</south>
            </li>
            <li>
              <bodyType>Thin</bodyType>
              <north>(0,0,0.045)</north>
            </li>
            <li>
              <bodyType>Hulk</bodyType>
              <north>(0,0,0.7)</north>
              <south>(0,0,-0.07)</south>
            </li>
            <li>
              <bodyType>Female</bodyType>
              <north>(0,0,0.07)</north>
              <south>(0,0,0.05)</south>
            </li>
          </BodyTypeOffsetsByFacingRows>

          <drawData>
            <scale>0.085</scale>
            <defaultData>
              <layer>23.555</layer>
              <offset>(0,0,-0.20)</offset>
              <flip>true</flip>
            </defaultData>
            <dataNorth>
              <layer>23.384</layer>
              <offset>(0,0,-0.17)</offset>
            </dataNorth>
            <bodyTypeScales>
              <Hulk>1.55</Hulk>
              <Fat>1.35</Fat>
              <Thin>0.9</Thin>
              <Female>1.2</Female>
            </bodyTypeScales>
          </drawData>
        </li>
      </renderNodeProperties>
    </apparel>
    <modExtensions>
      <li Class="BNF.Core.DescriptionSwitcher.BnfDescriptionExtension">
        <LoreDesc>While Carapace Armor is better than flak vests and jackets, it does seem to lack a defense against charge weaponry and heavy munitions. An easier solution would be to equip all soldiers in the infantry with semi-powered armor but that is easier said than done. The end decision of this issue eventually became reinforcing the Carapace Armor with additional plates of plasteel to enhance its defensive abilities. The Heavy Carapace Armor was introduced during the Battle of Coldharbour after the Fall of the Great Domain to mixed success.</LoreDesc>
        <VanillaDesc>A reinforced variant of standard Carapace armor with additional plating for greater protection. The extra bulk makes it heavier and more resource-intensive to produce. Strong armor, but still not a true substitute for power armor.</VanillaDesc>
      </li>
    </modExtensions>
  </ThingDef>

  <ThingDef ParentName="KP_Heavy_Flak_Armor_Base">
    <defName>KP_Heavy_Flak_Armor_Medic</defName>
    <label>Heavy Carapace Armor (Medic)</label>
    <description>While Carapace Armor is better than flak vests and jackets, it does seem to lack a defense against charge weaponry and heavy munitions. An easier solution would be to equip all soldiers in the infantry with semi-powered armor but that is easier said than done. The end decision of this issue eventually became reinforcing the Carapace Armor with additional plates of plasteel to enhance its defensive abilities. The Heavy Carapace Armor was introduced during the Battle of Coldharbour after the Fall of the Great Domain to mixed success.\n\n This variant is marked for usage by Medical staff.</description>
    <apparel>
      <tags Inherit="False">
        <li>BNF_Armor_Heavy_Medic</li>
      </tags>
      <renderNodeProperties>
        <li Class="BNF.Core.DecalSystem.PawnRenderNodePropertiesOmniBnf">
          <nodeClass>VEF.Graphics.PawnRenderNode_Omni</nodeClass>
          <workerClass>BNF.Core.DecalSystem.PawnRenderNodeWorkerOmniBodyApparelBnf</workerClass>
          <parentTagDef>ApparelBody</parentTagDef>
          <baseLayer>16</baseLayer>

          <conditionalGraphics>
            <useFactionRNGSeed>true</useFactionRNGSeed>
            <texPaths>
              <li>Symbols/Medical/Blooddrop</li>
              <li>Symbols/Medical/Caduceus</li>
              <li>Symbols/Medical/Chalice</li>
              <li>Symbols/Medical/CrossCircle</li>
              <li>Symbols/Medical/Medic</li>
              <li>Symbols/Medical/Pill</li>
              <li>Symbols/Medical/StaffofAsclepius</li>
              <li>Symbols/Medical/StarofLife</li>
              <li>Symbols/Medical/18Med</li>
              <li>Symbols/Medical/2Med</li>
            </texPaths>
            <colorA>
              <color>(0.0,0.0,0.0)</color>
            </colorA>
            <shader>Cutout</shader>
            <alts>
              <li>
                <tagRequirements>
                  <li>DecalActive</li>
                </tagRequirements>
                <texPath>DecalSymbol</texPath>
                <colorA>
                  <taggedColor>DecalSymbolColor</taggedColor>
                </colorA>
                <shader>Cutout</shader>
              </li>
            </alts>
          </conditionalGraphics>

          <visibleFacing>
            <li>South</li>
            <li>North</li>
          </visibleFacing>

          <BodyTypeOffsetsByFacingRows>
            <li>
              <bodyType>Fat</bodyType>
              <north>(0,0,0.07)</north>
              <south>(0,0,0.025)</south>
            </li>
            <li>
              <bodyType>Thin</bodyType>
              <north>(0,0,0.045)</north>
            </li>
            <li>
              <bodyType>Hulk</bodyType>
              <north>(0,0,0.7)</north>
              <south>(0,0,-0.07)</south>
            </li>
            <li>
              <bodyType>Female</bodyType>
              <north>(0,0,0.07)</north>
              <south>(0,0,0.05)</south>
            </li>
          </BodyTypeOffsetsByFacingRows>

          <drawData>
            <scale>0.085</scale>
            <defaultData>
              <layer>23.555</layer>
              <offset>(0,0,-0.20)</offset>
              <flip>true</flip>
            </defaultData>
            <dataNorth>
              <layer>23.384</layer>
              <offset>(0,0,-0.17)</offset>
            </dataNorth>
            <bodyTypeScales>
              <Hulk>1.55</Hulk>
              <Fat>1.35</Fat>
              <Thin>0.9</Thin>
              <Female>1.2</Female>
            </bodyTypeScales>
          </drawData>
        </li>
      </renderNodeProperties>
    </apparel>
    <modExtensions>
      <li Class="BNF.Core.DescriptionSwitcher.BnfDescriptionExtension">
        <LoreDesc>While Carapace Armor is better than flak vests and jackets, it does seem to lack a defense against charge weaponry and heavy munitions. An easier solution would be to equip all soldiers in the infantry with semi-powered armor but that is easier said than done. The end decision of this issue eventually became reinforcing the Carapace Armor with additional plates of plasteel to enhance its defensive abilities. The Heavy Carapace Armor was introduced during the Battle of Coldharbour after the Fall of the Great Domain to mixed success.\n\n This variant is marked for usage by Medical staff.</LoreDesc>
        <VanillaDesc>A reinforced variant of standard carapace armor with additional plating for greater protection. The extra bulk makes it heavier and more resource-intensive to produce. Identical to the standard heavy carapace armor, but marked with insignia to denote medical personnel.</VanillaDesc>
      </li>
    </modExtensions>
  </ThingDef>

  <ThingDef ParentName="KP_Heavy_Flak_Armor_Base">
    <defName>KP_Heavy_Flak_Armor_Support</defName>
    <label>Heavy Carapace Armor (Engineer)</label>
    <description>While Carapace Armor is better than flak vests and jackets, it does seem to lack a defense against charge weaponry and heavy munitions. An easier solution would be to equip all soldiers in the infantry with semi-powered armor but that is easier said than done. The end decision of this issue eventually became reinforcing the Carapace Armor with additional plates of plasteel to enhance its defensive abilities. The Heavy Carapace Armor was introduced during the Battle of Coldharbour after the Fall of the Great Domain to mixed success.\n\n This variant is marked for usage by Engineering staff.</description>
    <apparel>
      <tags Inherit="False">
        <li>BNF_Armor_Heavy_Engineer</li>
      </tags>
      <renderNodeProperties>
        <li Class="BNF.Core.DecalSystem.PawnRenderNodePropertiesOmniBnf">
          <nodeClass>VEF.Graphics.PawnRenderNode_Omni</nodeClass>
          <workerClass>BNF.Core.DecalSystem.PawnRenderNodeWorkerOmniBodyApparelBnf</workerClass>
          <parentTagDef>ApparelBody</parentTagDef>
          <baseLayer>16</baseLayer>

          <conditionalGraphics>
            <useFactionRNGSeed>true</useFactionRNGSeed>
            <texPaths>
              <li>Symbols/Engineer/Anvil</li>
              <li>Symbols/Engineer/Clockwork</li>
              <li>Symbols/Engineer/Cog</li>
              <li>Symbols/Engineer/Hammer</li>
              <li>Symbols/Engineer/HammerWrench</li>
              <li>Symbols/Engineer/Rook</li>
              <li>Symbols/Engineer/Wrench</li>
              <li>Symbols/Engineer/Wrenches</li>
              <li>Symbols/Engineer/16Eng</li>
              <li>Symbols/Engineer/20Eng</li>
              <li>Symbols/Engineer/176Eng</li>
            </texPaths>
            <colorA>
              <color>(0.0,0.0,0.0)</color>
            </colorA>
            <shader>Cutout</shader>
            <alts>
              <li>
                <tagRequirements>
                  <li>DecalActive</li>
                </tagRequirements>
                <texPath>DecalSymbol</texPath>
                <colorA>
                  <taggedColor>DecalSymbolColor</taggedColor>
                </colorA>
                <shader>Cutout</shader>
              </li>
            </alts>
          </conditionalGraphics>

          <visibleFacing>
            <li>South</li>
            <li>North</li>
          </visibleFacing>

          <BodyTypeOffsetsByFacingRows>
            <li>
              <bodyType>Fat</bodyType>
              <north>(0,0,0.07)</north>
              <south>(0,0,0.025)</south>
            </li>
            <li>
              <bodyType>Thin</bodyType>
              <north>(0,0,0.045)</north>
            </li>
            <li>
              <bodyType>Hulk</bodyType>
              <north>(0,0,0.7)</north>
              <south>(0,0,-0.07)</south>
            </li>
            <li>
              <bodyType>Female</bodyType>
              <north>(0,0,0.07)</north>
              <south>(0,0,0.05)</south>
            </li>
          </BodyTypeOffsetsByFacingRows>

          <drawData>
            <scale>0.085</scale>
            <defaultData>
              <layer>23.555</layer>
              <offset>(0,0,-0.20)</offset>
              <flip>true</flip>
            </defaultData>
            <dataNorth>
              <layer>23.384</layer>
              <offset>(0,0,-0.17)</offset>
            </dataNorth>
            <bodyTypeScales>
              <Hulk>1.55</Hulk>
              <Fat>1.35</Fat>
              <Thin>0.9</Thin>
              <Female>1.2</Female>
            </bodyTypeScales>
          </drawData>
        </li>
      </renderNodeProperties>
    </apparel>
    <modExtensions>
      <li Class="BNF.Core.DescriptionSwitcher.BnfDescriptionExtension">
        <LoreDesc>While Carapace Armor is better than flak vests and jackets, it does seem to lack a defense against charge weaponry and heavy munitions. An easier solution would be to equip all soldiers in the infantry with semi-powered armor but that is easier said than done. The end decision of this issue eventually became reinforcing the Carapace Armor with additional plates of plasteel to enhance its defensive abilities. The Heavy Carapace Armor was introduced during the Battle of Coldharbour after the Fall of the Great Domain to mixed success.\n\n This variant is marked for usage by Engineering staff.</LoreDesc>
        <VanillaDesc>A reinforced variant of standard carapace armor with additional plating for greater protection. The extra bulk makes it heavier and more resource-intensive to produce. Identical to the standard heavy carapace armor, but marked with insignia to denote engineers.</VanillaDesc>
      </li>
    </modExtensions>
  </ThingDef>

</Defs>